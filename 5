/*
===============================================================================
EXERCÍCIO 5

Faça uma função recursiva que calcule e retorne o N-ésimo termo da sequência
de Fibonacci.

Alguns números desta sequência são:
0, 1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89...

Definição matemática:
    Fib(0) = 0 <-- caso base
    Fib(1) = 1 <-- caso base
    Fib(n) = Fib(n - 1) + Fib(n - 2), para n >= 2 <-- subindo a pilha


    Fib(0) = 0
    Fib(1) = 1

    Fib(2) = Fib(1) + Fib(0) = 1 + 0 = 1
    Fib(3) = Fib(2) + Fib(1) = 1 + 1 = 2
    Fib(4) = Fib(3) + Fib(2) = 2 + 1 = 3
    Fib(5) = Fib(4) + Fib(3) = 3 + 2 = 5
    Fib(6) = Fib(5) + Fib(4) = 5 + 3 = 8

Exemplo:
    Entrada: N = 6
    Saída: Fib(6) = 8

    indice:   0  1  2  3  4  5  6
    valor:    0  1  1  2  3  5  8

===============================================================================
*/

#include <stdio.h>   // Biblioteca padrão para entrada e saída
#include <stdlib.h>  // Biblioteca padrão (para system("pause"))

// -----------------------------------------------------------------------------
// Protótipo da função recursiva que calcula o N-ésimo termo de Fibonacci
// -----------------------------------------------------------------------------
int fibonacci(int n);

// -----------------------------------------------------------------------------
// Função principal (main)
// -----------------------------------------------------------------------------
int main()
{
    int N; // Declara uma variável para armazenar o valor informado pelo usuário

    // Solicita ao usuário o número N desejado
    printf("Digite o valor de N (posicao desejada na sequencia de Fibonacci): ");
    scanf("%d", &N); // Lê o valor de N

    // Verifica se o número é válido (não negativo)
    if (N >= 0)
    {
        // Chama a função recursiva fibonacci() e armazena o resultado
        int resultado = fibonacci(N);

        // Exibe o resultado formatado na tela
        printf("O termo %d da sequencia de Fibonacci eh: %d\n", N, resultado);
    }
    else
    {
        // Caso o número seja negativo, exibe uma mensagem de erro
        printf("Numero invalido! Digite um valor inteiro nao negativo.\n");
    }

    system("pause"); // Pausa o programa (Windows)
    return 0;        // Encerra o programa com sucesso
}

// -----------------------------------------------------------------------------
// Função recursiva fibonacci()
// Calcula o N-ésimo termo da sequência de Fibonacci
// -----------------------------------------------------------------------------
int fibonacci(int n)
{
    // CASOS BASE:
    // Quando n for 0, o resultado é 0
    // Quando n for 1, o resultado é 1
    if (n == 0)
    {
        return 0; // Retorna 0 e interrompe a recursão
    }
    else if (n == 1)
    {
        return 1; // Retorna 1 e interrompe a recursão
    }
    else
    {
        // CASO RECURSIVO:
        // A função se chama duas vezes: uma para (n - 1) e outra para (n - 2)
        // Fib(n) = Fib(n - 1) + Fib(n - 2)
        return fibonacci(n - 1) + fibonacci(n - 2);
    }
}
